#!/usr/bin/env fish

set -q argv[1]; or set argv[1] $PWD

for dir in $argv[1]/*/
    set files (find $dir -type f \( -iname '*.flac' -o -iname '*.m4a' -o -iname '*.mp3' \))
    if test (count $files) -gt 0
        echo "üéµ Processing album: $dir"
        loudgain --album --noclip --tagmode=e $files
    else
        echo "‚è≠  No supported format found in: $dir"
    end
end
